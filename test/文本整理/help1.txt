标题:编程帮助
语言:中文
版本:TDi V6.10
修改时间:201505


\rM代码
\n    M代码由代码地址M和其后的1～2位数字或4位数组成，用于控制程序执行的流程或输出M代码到PLC。下表为标准PLC程序定义的M代码。
[pic]/sys/res/picture/chn/help/help1/MCODE_standard_0.gif[\pic]
[pic]/sys/res/picture/chn/help/help1/MCODE_standard_1.gif[\pic]
[pic]/sys/res/picture/chn/help/help1/MCODE_standard_2.gif[\pic]
\tM00
\n
    代码格式：M00

    代码功能：程序暂停。


\tM01
\n
 　 代码格式：M01

    代码功能：进入选择停状态时，执行M01代码后，程序运行停止。


\tM02
\n
    代码格式：M02

    代码功能：自动运行结束。


\tM03/04/05
\n
　  代码格式：M03；
              M04；
              M05；

    代码功能：M03：正转；
              M04：反转；
              M05：停止。


\tM08/09
\n
    代码格式：M08；
              M09；

    代码功能：M08：冷却泵开；
              M09：冷却泵关。


\tM10/11
\n
    代码格式：M10；
              M11；

    代码功能：M10：尾座进；
              M11：尾座退。


\tM12/13
\n
　  代码格式：M12；
              M13；

    代码功能：M12：卡盘夹紧；
              M13：卡盘松开。


\tM14/15
\n
    代码格式：M14；
              M15；

    代码功能：M14：主轴切换为位置控制；
              M15：主轴切换为速度控制。


\tM20/21
\n
    代码格式：M20；
              M21；

    代码功能：M20：主轴夹紧；
              M21：主轴松开。

\tM24/25
\n
    代码格式：M24；
              M25；

    代码功能：M24：第2主轴切换为位置控制；
              M25：第2主轴切换为速度控制。


\tM30
\n
    代码格式：M30

    代码功能：自动运行结束，加工件数加1。


\tM32/33
\n
    代码格式：M32；
              M33；

    代码功能：M32：润滑泵开；
              M33：润滑泵关。


\tM41～44
\n
    代码格式：M4n；(n=1、2、3、4)

    代码功能：执行M4n时，主轴换到第n档


\tM50～58
\n
    代码格式：M5n；(n=0～8)

    代码功能：M50：取消定位状态；
              M5n(n=1～8)：主轴定位到第n点。


\tM63/64/65
\n
    代码格式：M63；
              M64；
              M65；

    代码功能：M63：第2主轴正转；
              M64：第2主轴反转；
              M65：第2主轴停止。


\tM98
\n
    代码格式：M98  P<调用次数><子程序号>
          　　<调用次数>:1～9999。
         　　 <子程序号>:0000～9999。

    代码功能：调用执行P指定的子程序。


\tM99 
\n
    代码格式：M99  P<程序段号>
        　　　<程序段号>:返回到的主程序段。

    代码功能：返回主程序，未输入P时，返回主程序中调用当前子程序的下一行。如果M99用于主程序结束则当前程序将反复执行。


\tM9000-9999
\n
    代码格式: M<宏程序>
              <宏程序>:O9000～O9999程序。

    代码功能：调用对应的宏程序(O9000～O9999)


\rS代码
\n  
    S代码用于控制主轴的转速，GSK980TDi控制主轴转速的方式有两种：

    一、档位主轴：S代码由PLC处理，PLC输出开关量信号到机床，实现主轴转速的有级变化。

    二、模拟主轴：S代码指定主轴转速，系统通过GSKLink总线或模拟电压信号控制主轴伺服装置或变频器，实现主轴转速无级调速。


\t档位主轴
\n
　  代码格式： S<档位>
               <档位>：00～04

    代码功能：变更主轴档位。


\t模拟主轴
\n
　  代码格式：S<主轴转速>
              <主轴转速>：0000～9999

    代码功能：变更主轴转速。


\rT代码
\n  
    GSK980TDi的T代码具有以下作用：自动换刀、执行刀具偏置、刀具寿命管理。

\t刀具控制
\n
    代码格式：T<刀具号><偏置号>
              <刀具号>：01-32(前导0不能省略)
              <偏置号>：00-32(前导0不能省略)

    代码功能：自动刀架换刀到目标刀具号刀位，并按代码的刀具偏置号执行刀具偏置。


\t刀具寿命
\n    1.刀具寿命设置
    在刀补－>刀具寿命页面可直接输入刀具寿命管理数据。
    在该页面下可以自由设置刀具的使用寿命。

    2.刀具寿命功能使用
    代码格式：
        Txx99：开始启用xx组的刀具并进行寿命管理
        Txx88：取消xx组的刀具补偿
 
    使用示例：
        O0000 (O0000)	
        …	
        T0199；  开始启用01组刀具
        …	
        T0188；  取消01组刀具补偿
        …	
        T0508；  使用05号刀08刀补，无寿命管理
        …	
        T0500；  撤消05号刀刀补
        …	
        T0299；  结束刀号05，开始启用02组刀具
        …	
        T0199；  结束02组刀具，启用01组的刀具
        …	
\rG代码
\n  
    G代码由代码地址G和其后的多位代码值组成，用来规定刀具相对工件的运动方式、进行坐标设定等多种操作.
\tG00
\n    代码格式：G00 X(U)_ Z(W)_；

    代码功能：以快速移动速度移动到目标位置。快速移动速度由系统数据参数№022设定。

    代码说明:G00为模态G代码；
             X(U)、Z(W)：目标位置的坐标值。

    注意事项：各轴以自已的快速速度移动，其合成轨迹不一定是直线。

\tG01
\n    代码格式：G01  X(U)_ Z(W)_ F_；

    代码功能：运动轨迹为从起点到终点的一条直线。

    代码说明: G01为模态G代码；
              X(U)、Z(W)：终点的坐标值；
              F：切削进给速度；

    注意事项：F的最大值不超过数据参数№027(切削进给上限速度)设置值。

\tG02/03
\n    代码格式：
        G17  G02/G03  X(U)_ Y(V)_ R(I、J)_ F_；
        G18  G02/G03  X(U)_ Z(W)_ R(I、K)_ F_；
        G19  G02/G03  Y(V)_ Z(W)_ R(J、K)_ F_；

    代码功能：G02代码运动轨迹为从起点到终点的顺时针(后刀座坐标系)/逆时针(前刀座坐标系)圆弧，G03代码运动轨迹为从起点到终点的逆时针(后刀座坐标系)/顺时针(前刀座坐标系)圆弧，轨迹如下图所示。

    代码轨迹：
[pic]/sys/res/picture/chn/help/help1/program_G0203.gif[\pic]

    代码说明：G02、G03为模态G代码；
        X(U)、Y(V)：G17平页面下的终点坐标；
        X(U)、Z(W)：G18平页面下的终点坐标；
        Y(V)、Z(W)：G19平页面下的终点坐标；
        R：圆弧半径；
        I：圆心与起点在X方向的差值，半径值；
        K：圆心与起点在Z方向的差值；

    注意事项：
    1) I、K和R同时输入时，R有效，I、K无效；
    2) R值必须等于或大于起点到终点的一半，如果终点不在用R定义的圆弧上，系统会产生报警；
    3) 地址X(U)、Z(W)可省略；当省略一个时，表示省略的轴的起点和终点一致；同时省略表示终点和始点是同一位置，若用I、K指定圆心时，执行G02/G03代码的轨迹为全圆(360°)；用R指定时，表示0°的圆；
    4) 用R指定时，不能为整圆，R负值时为大于180°的圆弧，R正值时为小于或等于180度的圆弧；
    5) G02、G03代码可用于复合循环G70～G73中，但不能用于定位段；
    6) G02、G03代码可用于C刀补中，但不用于C刀补的建立与撤消；
\tG05/05.1
\n    代码格式：G05(G05.1) X(U)_ Z(W)_ I_ K_ F_；

    代码功能：已知圆弧轮廓上的三个点的坐标，则可使用G05或G05.1代码实现三点圆弧加工。

    代码说明：G05(G05.1)为模态G代码；
        I：G05中间点与起点在X方向的差值，半径值；
           G05.1中间点X轴绝对坐标值；
        K：G05中间点与起点在Z方向的差值；
           G05.1中间点Z轴绝对坐标值；

    注意事项： 
    1)中间点：指圆弧上除起点和终点之外的任意一点；
    2)当给出的三点共线时，系统产生报警；
    3)当省略I时即认为I=0，当省略K时即认为K=0；当同时省略I、K时，系统产生报警；
    4)I、K的意义类似于G02/G03代码中圆心坐标相对于起点坐标的位移值I、K；
    5)G05不能加工整圆；
\tG6.2/6.3
\n
    代码格式：G6.2 X(U)_ Z(W)_ A_ B_ Q_；
              G6.3 X(U)_ Z(W)_ A_ B_ Q_；

    代码功能：G6.2运动轨迹为从起点到终点的顺时针(后刀座坐标系)/逆时针(前刀座坐标系)椭圆；G6.3运动轨迹为从起点到终点的逆时针(后刀座坐标系)/顺时针(前刀座坐标系)椭圆。

    代码轨迹：
[pic]/sys/res/picture/chn/help/help1/program_G162163.gif[\pic]
    代码说明:G6.2\6.3为模态G代码
        A：椭圆长半轴长；
        B：椭圆短半轴长；
        Q：长轴与Z轴正方向的夹角(单位：0.001°)
    注意事项:
    1)A、B是非模态参数,不输入时默认为0,当A=0或B=0时系统报警；当A=B的时候作为圆弧 (G02/G03)加工；
    2)Q值是非模态参数，每次使用都必须指定，省略时默认为0度,长轴与Z轴平行或重合；
    3)在前／后刀架坐标系下Q值为与Z轴正方向逆／须时针旋转到椭圆长轴轴的夹角。
    4)Q值定义的夹角在G18是和Z轴的夹角，在G19平面是和Y轴的夹角，在G17平面是和X轴的夹角。
    5)编程的起点与终点间的距离大于长轴长，系统会产生报警；
    6)地址X(U)、Z(W)可省略；当省略一个时，表示该轴的起点和终点一致；同时省略将不作处理；
    7)椭圆只加工小于180°(包含180°)的椭圆；
    8)G6.2、G6.3代码可用于复合循环G70～G73中；
    9)G6.2、G6.3代码可用于C刀补中；
\tG7.2/7.3
\n
    代码格式：G7.2 X(U)_ Z(W)_ P_ Q_；
              G7.3 X(U)_ Z(W)_ P_ Q_；

    代码功能：G7.2代码运动轨迹为从起点到终点的顺时针(后刀座坐标系)/逆时针(前刀座坐标系)抛物线；G7.3代码运动轨迹为从起点到终点的逆时针(后刀座坐标系)/顺时针(前刀座坐标系)抛物线。

    代码轨迹图：
[pic]/sys/res/picture/chn/help/help1/program_G172173.gif[\pic]
    代码说明：G7.2、G7.3为模态G代码；
        P：抛物线Y2=2PX的P值，单位为最小输入增量；
        Q：对称轴与Z轴正方向的夹角，单位:0.001度；
    注意事项：
    1)P值不可以为零或省略，否则产生报警；
    2)P值不含符号，如果输入了负值，则取其绝对值；
    3)Q值可省略，当省略Q值时，则抛物线的对称轴与Z轴平行，Q不含符号；
    4)当起点与终点所在的直线与抛物线的对称轴平行时，产生报警；
    5)在前／后刀架坐标系下Q值为与Z轴正方向逆／须时针旋转到抛物线对称轴的夹角。
    6)Q值定义的夹角在G18是和Z轴的夹角，在G19平面是和Y轴的夹角，在G17平面是和X轴的夹角。
    7)G7.2、G7.3代码可用于复合循环G70―G73和C刀补中；
\tG17～G19
\n    代码格式：G17……XY平面 
	      G18……ZX平面 
	      G19……YZ平面 

    代码功能：选择圆弧插补或刀具半径补偿的平面。

    代码说明：G17，G18，G19为模态G代码，在没指令的程序段里, 平面不发生变化。 

    注意事项：
    1)选择G17、G19平面时要先设定基本轴Y；
    2)C刀补状态下不能进行平面切换；
    3)G71～G76，G90，G92，G94只能在G18平面内使用；
    4)平面选择代码可与其他组G代码共段；
    5)移动指令与平面选择无关；
    6)直径或半径编程的处理：参数№1#2选择X轴是直径还是半径编程，Z轴与Y轴只能用半径编程。
    7)G17和G19平面下的C刀补的刀尖方向为0；
    8)椭圆和抛物线指令中的角度Q，在G18是和Z轴的夹角，在G19是和Y轴的夹角，在G17是和X轴的夹角。
\tG12.1/13.1
\n    代码格式：G12.1;  启动极坐标插补方式
              G13.1;    取消极坐标插补方式

    代码功能：极坐标插补是一种轮廓控制，它把在笛卡尔坐标系内的编程指令转换为直线轴的移动(刀具的移动)和旋转轴的移动(工件的旋转)。其对车削加工中的正面切口加工和凸轮轴的磨削等有效。

    代码说明：G12.1、G13.1为非模态G代码
        直线轴：参数№235指定
        回转轴：参数№236指定

    极坐标插补平面：
    G12.1启动极坐标插补方式，直线轴、回转轴构成一个插补平面（如下图），极坐标在该平面内完成。
[pic]/sys/res/picture/chn/help/help1/program_G112113.gif[\pic]

    编程格式：在极坐标插补平面可选择用直角坐标编程方式（G15）或极坐标编程方式（G16）。
        1.在极坐标插补平面中用直角坐标编程（G15）：
[pic]/sys/res/picture/chn/help/help1/program_G16.gif[\pic]
	X：直线轴距离，单位mm/inch；
	C：旋转轴上的距离，单位mm/inch；

        2.在极坐标插补平面中用极坐标编程（G16）：
[pic]/sys/res/picture/chn/help/help1/program_G15.gif[\pic]
	X: 当前刀具到原点的长度, 单位mm/inch；
	C：当前旋转轴的角度单位deg;

    插补平面中的圆弧插补：
    在极坐标插补平面中，圆弧插补指令中的圆弧半径的编程地址取决于插补平面中的第一轴(直线轴)。当直线轴是X轴或其平行轴时使用I和J；当直线轴是Y轴或其平行轴时使用J和K；当直线轴是Z轴或其平行轴时使用K和I。圆弧半径可用R指定。

    指令速度：
    极坐标插补中的F值是插补切线速度。当刀具移动到工件中心附近时，C轴的速度分量变得较大且超过C轴的最大切削进给速度(参数(№27)的设定值、角速度)。程序中的F值应由以下式子得出：
        L：刀具与工件中心之间的距离（单位：mm）
        R：C 轴的最大切削进给速度（单位：deg/min）
        可得出：F＜L×R×π /180（mm/min）

    限制条件：
    在极坐标插补中，非极坐标平面内的轴不执行极坐标插补运动，以指定代码执行运动，但是在圆弧、椭圆或抛物线代码中编入该轴的移动代码，自动忽略。

    注意事项：
    1) G12.1，G13.1属于21组代码，G12.1，G13.1，G16，G15要单独编为一段程序；
    2) G12.1，G13.1程序行之间不能进行换刀，换刀代码及之后的第一个定位代码必须放在G12.1代码之前；
    3) C刀补中间或G99状态下不能启动极坐标插补，否则报警；
    4) 指定G12.1时，极坐标插补的刀具位置必须从角度为0的位置开始；
    5) 极坐标插补过程中不能更变刀具长度偏置值，否则报警。
    6) 极坐标插补过程中使用刀尖半径补偿，刀尖方向为0。
\tG7.1
\n    代码功能：用角度指定的回转轴的移动量内部转换为沿外表面的直线轴的距离，以便能同其它轴一起完成直线插补或圆弧插补。在插补完成后，这一距离又转换为回转轴的移动量。圆柱插补用圆柱体的展开面编程。
[pic]/sys/res/picture/chn/help/help1/program_G171_0.gif[\pic]	

    代码格式：
        类型I ： G07.1 C_ ；(1) 
                 ……       (2) 
                 G7.1 C0；  (3) 

        类型II： G07.1 C_ J_ L_ R_ K_ ；(1)
                 ……                   (2)
                 G7.1 C0；              (3)

    代码意义：代码分为三个部分：
              (1)：给定圆柱半径值，圆柱插补开始；
              (2)：给定定义精车轨迹的程序段；
              (3)：取消圆柱插补
    圆柱插补有两种编程类型，类型I无需设定J(Δi)、 L(d) 、R(Δd) 、K(Δu)，系统按照精车轨迹的程序段运行；类型II是圆柱插补循环，系统根据精车余量、总切削量、切削次数等数据自动计算粗车偏移量、粗车的单次进刀量和粗车轨迹，每次切削的轨迹都是精车轨迹的偏移，切削轨迹逐步靠近精车轨迹，最后一次切削轨迹为精车轨迹。

    代码说明：
        C：为圆柱半径值(单位：mm/inch)
        J：粗车时X轴的总切削量，类型I不需设定；
        R：粗车时X轴的退刀量，类型I不需设定； 
        K：X轴的精加工余量，类型I不需设定；
        L：切削次数（不含精车轨迹），类型I不需设定

    代码轨迹：（类型II）
[pic]/sys/res/picture/chn/help/help1/program_G171_1.gif[\pic]	
    1)X轴从起点F快速移动到循环起点G；
    2)X轴切削进给至An点，进刀量为Δd＋n×Δu，并沿An>>Bn>>Cn>>Dn轨迹进行圆柱插补；(n为循环次数)
    3)X轴沿Dn－>E路径快速退刀至E点；
    4)刀具沿E－>G路径返回至循环起点G位置处(注：X、Z、C轴都返回至循环起点处)；
    5)重复步骤2)，直至X轴加工余量为0；

    平面选择：
    圆柱插补开始前应先选择插补所在的平面，该平面中的一个轴将会是圆柱插补中的直线轴，另一个轴作为圆柱插补中旋转轴展开时所对应的直线轴（见下图）。
    1)基本坐标系：
[pic]/sys/res/picture/chn/help/help1/program_G171_2.gif[\pic]
    2)圆柱插补中旋转轴设为X轴的平行轴时：
[pic]/sys/res/picture/chn/help/help1/program_G171_3.gif[\pic]
    3)圆柱插补中旋转轴设为Y轴或Y轴的平行轴时：
[pic]/sys/res/picture/chn/help/help1/program_G171_4.gif[\pic]
    4)圆柱插补中旋转轴设为Z轴的平行轴时：
[pic]/sys/res/picture/chn/help/help1/program_G171_5.gif[\pic]

    相关参数：
    圆柱插补中只能指定一个回转轴，回转轴既可以是基本轴也可以是基本轴的平行轴。三个附加轴的轴名可由数据参数№225设定（Y：89，A：65，B：66，C：67），轴的属性由数据参数№230设定。
    参数№230设定值意义
       0   	既不是基本三轴，也不是平行轴    
       1   	基本三轴中的X轴                 
       2   	基本三轴中的Y轴                 
       3   	基本三轴中的Z轴                 
       5   	X轴的平行轴                     
       6   	Y轴的平行轴                     
       7   	Z轴的平行轴                     
\t倒角功能
\n    1.直线倒角
    直线轮廓之间、圆弧轮廓之间、直线轮廓与圆弧轮廓之间插入一直线。直线倒角必须在G01、G02或G03代码段中使用。
    直线倒角分为两种类型，一种L为倒角长度，一种L为倒角点与交叉点间的长度。可由状态参数№181.0进行选择。在以下说明中，Ⅰ型代表L为倒角长度，Ⅱ型代表L为倒角点与交叉点间的长度。
    1)直线接直线
    代码格式：G01 ***** L_；
              G01 *****；
    代码功能：在两直线插补代码段中插入一段直线段
[pic]/sys/res/picture/chn/help/help1/program_Lcorner_L2L.gif[\pic]
    2)直线接圆弧
    代码格式：G01 ***** L_；
              G02/G03 *****；
    代码功能：在直线和圆弧插补代码间插入一段直线段
[pic]/sys/res/picture/chn/help/help1/program_Lcorner_L2C.gif[\pic]
    3)圆弧接圆弧
    代码格式：G02/G03 ***** L_；
              G02/G03 *****；
    代码功能：在两段圆弧插补代码间插入一段直线段
[pic]/sys/res/picture/chn/help/help1/program_Lcorner_C2C.gif[\pic]
    4)圆弧接直线
    代码格式：G02/G03 ***** L_；
              G01 *****；
    代码功能：在圆弧和直线插补代码间插入一段直线段
[pic]/sys/res/picture/chn/help/help1/program_Lcorner_C2L.gif[\pic]

    2.圆弧倒角
    直线轮廓之间、圆弧轮廓之间、直线轮廓与圆弧轮廓之间插入一圆弧，圆弧与轮廓线间进行切线过渡。圆弧倒角的代码地址为D，倒角圆弧的半径用D指定，圆弧倒角必须在G01、G02或G03代码段中使用。
    1)直线接直线
    代码格式：G01 ***** D_；
              G01 *****；
    代码功能：在两段直线插补段中插入一段圆弧,插入的圆弧段与两直线相切，半径值用D指定。
[pic]/sys/res/picture/chn/help/help1/program_Ccorner_L2L.gif[\pic]
    2)直线接圆弧
    代码格式：G01 ***** D_；
              G02/G03 *****；
    代码功能：在直线与圆弧交接处插入一段圆弧,插入的圆弧段与直线、圆弧均相切，半径值用D指定。
[pic]/sys/res/picture/chn/help/help1/program_Ccorner_L2C.gif[\pic]
     3)圆弧接圆弧
     代码格式：G02/G03 ***** D_；
               G02/G03 *****；
     代码功能：在两段圆弧间插入一段圆弧，插入的圆弧段与两圆弧均相切，半径值用D指定。
[pic]/sys/res/picture/chn/help/help1/program_Ccorner_C2C.gif[\pic]
    4)圆弧接直线
    代码格式：G02/G03 ***** D_；
              G01 *****；
    代码功能：在圆弧与直线的交接处插入一段圆弧,插入的圆弧段与圆弧、直线均相切，半径值用D指定。
[pic]/sys/res/picture/chn/help/help1/program_Ccorner_C2L.gif[\pic]

    3.特殊情况
    以当处于下面的情况时，倒角功能无效或报警。
    情形1：两段插补程序段在交点的运动方向相同，倒角功能无效。
    情形2：倒角直线或半径长度过长，经计算倒角轨迹无法与两段插补程序段衔接，CNC产生报警。
\tG09/61/64
\n    代码格式：
        G09；使当前程序段准确到位。
        G61；模态指令，程序段准确执行到位。
        G64；模态指令，程序段段间平滑过渡。

    注意事项：
    1)G09、G61/G64在G71、G72和G73循环过程中无效；
    2)当状态参数№0007.5设定为“1”时，模态信息栏固定显示为G61，且G64无效；
    3)当状态参数№0007.5设定为“1”时，模态信息栏的G61/64位置马上显示为G61；当状态参数№0007.5设定为“0”时，模态信息栏的G61/64位置显示为G64，且进入段间平滑状态；
    4)G64与切削指令共段时，G64所在程序段取消准停到位；
    5)G09、G64以及G61共段时，最后一个G代码有效；
    6)执行G64代码或重新上电，G61模态被取消。

\t角度编程
\n    在加工图纸中存在有部份直线用角度标注，没有端点的精确位置。图纸尺寸直接输入功能可以让用户直接使用填写在加工图纸上的直线的角度、倒角值进行编程。

    指令格式：图纸尺寸直接输入功能只用于直线插补（G01），可以在G17平面（YX平面）、G18平面（XZ平面）、G19平面（ZY平面）下指定本功能。下面的指令格式以G18平面（XZ平面）为例子，使用G17、G19平面指令时，格式变化如下：
    G17平面：“Z”→“X”，“X”→“Y”
    G19平面：“Z”→“Y”，“X”→“Z”
[pic]/sys/res/picture/chn/help/help1/program_3.13_0.gif[\pic]
[pic]/sys/res/picture/chn/help/help1/program_3.13_1.gif[\pic]
[pic]/sys/res/picture/chn/help/help1/program_3.13_2.gif[\pic]
[pic]/sys/res/picture/chn/help/help1/program_3.13_3.gif[\pic]

    指令说明：当指令格式1时，X或Z方向坐标有且仅可指定一个，否则按常规直线执行（角度Q被忽略）。其中 Q_ 角度是直线与Z轴的夹角，单位：0.001度，其角度方向如下：
[pic]/sys/res/picture/chn/help/help1/program_3.13_3-46.gif[\pic]

    注意事项：
    1)G00和G01指令均可用于图纸尺寸直接输入功能中，但是使用G00的图纸尺寸直接输入功能时，G00只会定位；
    2)为防止计算的移动距离过大，指令格式1中，计算交点的角度公差是±1°（Q值转换成0°～360°）。
    3)X_ Q_（如果角度Q为（0°或180°）±1°以内的值时，将产生报警。）
    4)Z_ Q_（如果角度Q为（90°或270°）±1°以内的值时，将产生报警。）
    5)计算交点时，由两条直线构成的角度差在±1°之间时，将产生报警。
    6)在一个仅指定了角度指令的程序段后面的移动程序段中，必须指定坐标指令值（绝对指令）和角度指令值。        例：
        N1 X_ Q_
        N2 Q_
        N3 X_ Z_ Q_
      （在N3 程序段中必须指定X、Z轴的绝对指令值和角度指令Q。否则产生报警。）
    7)在连续的图纸尺寸直接输入指令中，可以插入G04及M、S、T程序段，但是插入2段或以上，将产生报警。
    8)在复合形固定循环中，可以在以P或Q指定的顺序号间的程序段中使用图纸尺寸直接输入的程序，但是Q顺序号指定的程序段不得处在连续图纸尺寸直接输入指令的中间。
\tG04
\n    代码格式：G04 P_ Q_；
              G04 X_ Q_；
              G04 U_ Q_；
              G04；

    代码功能：延时给定的时间后，执行下一个程序段。在G04暂停时间内，收到跳转信号（由Q值指定），能够中止暂停，立即执行下一个程序段。

    代码说明：非模态G代码；
        P：暂停时间，单位：ms
        X、U：暂停时间，单位：s
        Q：跳转信号地址选择，取值范围1～4

    注意事项：
    1) 当P、X、U、Q未输入时，表示程序段间准确停。
    2) 当P、X、U指定负值时，表示暂停时间为0。
    3) P、X、U都有输入，P有效；X、U都有输入，X有效
    4) Q1～Q4对应的跳转信号地址由参数№148～№151设定。
    5) G04代码执行中，进行进给保持的操作，当前页面左上方显示暂停，但G04计时没有停止，当计时时间到时，光标停留到下一段程序。

\tG10 L3
\n
    代码格式：G10 L3； (开启刀具寿命管理设置)
              ……
              G11；    (关闭刀具寿命管理设置)

    代码功能：设置刀具寿命管理数据。

    代码说明：
[pic]/sys/res/picture/chn/help/help1/program_G10L3.gif[\pic]

    注意事项：
    1) G10 L3 至G11 之间的其他代码字一律忽略；
    2) 运行刀具寿命程序将清除原有的刀具寿命数据；

\tG20/21
\n    代码格式：G20；(英制输入)
              G21；(公制输入)

    代码说明：代码G20/G21设置CNC输入单位：G21：公制单位(mm)；G20：英制单位(inch)。

    注意事项：
    1) 参数№001的BIT0（公英制）：0：公制输入，1：英制输。同样可以设置CNC输入单位。
    2) 参数№001的BIT0与代码G20/G21对应，执行G20/G21时该参数改变，修改参数时代码模态也会变化。
    3) 输入增量单位改变后机床坐标将自动转换；

\tG22/23
\n    代码格式：G22  X_ Y_ Z_ I_ J_ K_；
              G23；                   

    代码功能：设置一个区域，该区域的内侧或外侧为限位区域，当机床坐标进入限位区域时发出报警。

    代码说明：
        G22   ：打开存储行程限位检测2
        G23   ：关闭存储行程限位检测2
        X_Y_Z_：设置正方向极限机床坐标值；
        I_J_K_：设置负方向极限机床坐标值；

    注意事项：
    1）参数№100、№101也可设置正、负方向极限位置
    2）参数 №172.2设定范围的内侧/外侧禁止；
    3）状态参数№172.4为0时存储行程限位检测无效；

\tG28
\n    代码格式：G28 X(U)_ Z(W)_ ；

    代码功能：快速移动到X(U)、Z(W)指定的位置后，再回机床零点。

    代码说明：G28为非模态G代码；
        X、Z：中间点位置的绝对坐标；
        U、W：中间点位置与起点位置的绝对坐标差值。
        X(U)、Z(W)可省略，被省略的轴不进行回零。

    代码动作过程：
[pic]/sys/res/picture/chn/help/help1/program_G28.gif[\pic]
    1)快速定位到中间点位置(A点→B点)；
    2)从中间点快速定位到参考点(B点→R点)；
    3)返回参考点完毕，回零灯亮。

    注意事项：
    1)从A点→B点及B点→R点过程中，两轴是以各自独立的快速速度移动；
    2)执行G28代码回机床零点操作后，系统取消刀具长度补偿；
\tG30
\n
    代码格式：G30 P2 X(U)_ Z(W)_；(回第2参考点)
              G30 P3 X(U)_ Z(W)_；(回第3参考点)
              G30 P4 X(U)_ Z(W)_；(回第4参考点)

    代码功能：快速移动到X(U)、Z(W)指定的中间点位置后再返回机床第2，3，4参考点。机床第2、3、4参考点在机床坐标系中的关系如下图所示。
[pic]/sys/res/picture/chn/help/help1/program_G30_0.gif[\pic]
    代码说明：G30为非模态G代码；
        X：中间点X轴的绝对坐标；
        U：中间点X轴的相对坐标；
        Z：中间点Z轴的绝对坐标；
        W：中间点Z轴的相对坐标。
        X(U)、Z(W)可省略，被省略的轴不进行回零。

    代码执行动作过程(如下图，以回第2参考点为例)：
[pic]/sys/res/picture/chn/help/help1/program_G30_1.gif[\pic]
    1)快速定位到中间点位置(A点→B点)；
    2)以数据参数№113设定的速度定位到参数№121设定的第2参考点(B点→R2点)；
    3)返回参考点完毕，回零灯亮。
    注意事项：
    1)手动回机床参考点或执行G28代码回机床参考点之后，才可使用返回机床第2，3，4参考点功能；
    2)从A点→B点及B点→R2点过程中，两轴是以各自独立的速度移动；
    3)执行G30代码回机床第2，3，4参考点后，系统取消刀具长度补偿；
    4)返回机床第2，3，4参考点，不设置工件坐标系。
    5)数据参数№121～№123分别设置机床第2、3、4参考点的机床坐标。

\tG31
\n    代码格式：G31 X(U)_ Z(W)_ F_ P_；

    代码功能：在该代码执行期间，若输入了外部跳转信号，则中断该代码的执行，转而执行下一程序段。该功能可用于工件尺寸的动态测量(如磨床)、对刀测量等。

    代码说明：非模态G代码(00组)；
        X(U)_ Z(W)_：终点位置
        F_：进给速度
        P_：跳转信号地址，P1～P4。

    注意事项：
    1)使用该代码前需撤销刀尖半径补偿。
    2)为保证停止位置精度，进给速度不宜设置过大

    跳转信号：
        SKIP: P1   №148设定
              P2   №149设定
              P3   №150设定
              P4   №151设定
    当程序段正在执行跳转代码G31中收到跳转信号。CNC停止G31代码的移动并将绝对坐标位置被存储在用户宏变量中(#995～#999)，然后开始下一程序段的执行。

    与G31代码有关的参数
    №185 Bit7 :G31跳转信号：1：为0时有效；0：为1时有效。
    №185 Bit6 :进给倍率或空运行对G31、G36、G37：1：有效；0无效。

\tG36/37
\n    代码格式：G36 X_；
              G37 Z_；

    代码功能：当执行该代码使刀具移至测量位置时，CNC系统自动测量当前实际坐标值和代码的坐标值之间的差并将其作为刀具的偏移值。该功能常用于自动对刀。

    代码说明：非模态G代码(00组)；
        X轴绝对坐标(只用于G36)；
　　　　Z轴绝对坐标(只用于G37)；
 	使用该代码前需撤销刀尖半径补偿；
	只能使用绝对编程；
	使用该代码前必须先定义工件坐标系；
	使用该代码前须指定刀号和刀补号；

    测量位置到达信号：
        XAE(X3.6)-----对应G36代码
        ZAE(X3.7)-----对应G37代码
    测量位置到达信号变为“1”时，将指令的坐标与当前坐标值的差值加到当前刀具补偿值中，以更新补偿值。      在执行程序段G36 X_(或G37 Z_)时，刀具首先快速移动到代码的测量位置，刀具减速并暂时地停在测量位置之前的距离γ处，然后，刀具以参数(№141)预置的速度运动到测量位置。如果对应于G代码的测量位置到达信号变为“1”，在刀具处于测量位置的±ε的范围内时，CNC更新偏置补偿值，并结束这个程序段的运动命令。如果测量位置到达信号不变为“1”，在刀具已经冲过测量位置距离ε之后，CNC产生报警，并且结束该程序段的运行命令，不更新偏置补偿值。

    与G36、G37自动刀具偏移代码有关的参数
    №185 Bit7：1:信号为0时有效；0:信号为1时有效。
    №141:自动刀具补偿测量时的进给速度。
    №142:自动刀具补偿中X轴γ值
    №143:自动刀具补偿中Z轴γ值
    №144:自动刀具补偿中X轴ε值
    №145:自动刀具补偿中Z轴ε值

\tG40/41/42
\n    代码格式：
        G41/G42  <移动指令>；  (刀补建立)
        G40      <移动指令>；  (刀补撤消)

    代码功能：对G41/G42刀补建立到G40刀补撤消之间的程序进行刀尖半径补偿。

    代码说明：
        G41：后刀座中左刀补，前刀座中右刀补；
        G42：后刀座中右刀补，前刀座中左刀补；
[pic]/sys/res/picture/chn/help/help1/program_G4142_0.gif[\pic]
[pic]/sys/res/picture/chn/help/help1/program_G4142_1.gif[\pic]
    注意事项
    1）在刀尖半径补偿中，有连续7个及以上无移动程序段时（如辅助功能，暂停等），发出报警。
    2）刀尖半径补偿的建立与撤消的<移动指令>只能用G00或G01代码，否则会产生报警。
    3）按RESET（复位）键或执行M30后，CNC将取消刀补C补偿模式。
    4）在调用子程序前（即执行M98前），CNC必须在补偿取消模式，在子程序中再次建立刀补C。
    5）G74、G75、G76代码不执行刀尖半径补偿，暂时撤消补偿模式。
    6）执行G71、G72、G73代码会自动撤消补偿模式，如需使用可在精加工程序段的第一段中重新建立。

\tG50
\n    代码格式：G50 X(U)_ Z(W)_；

    代码功能：设置当前位置的绝对坐标，并将当前位置作为程序零点。

    代码说明：G50为非模态G代码；
        X：当前位置新的X轴绝对坐标；
        U：当前位置新的X轴绝对坐标的偏移值；
        Z：当前位置新的Z轴绝对坐标；
        W：当前位置新的Z轴绝对坐标的偏移值；

    G50代码中，X(U)、Z(W)均未输入时，不改变当前坐标值，把当前点坐标值设定为程序零点；未输入X(U)或Z(W)，未输入的坐标轴保持原来设定的程序零点。


\tG52
\n    代码格式：G52 X(U)_ Z(W)_；

    代码功能：使用G52指令，设定局部坐标系。

    代码说明：X(U)、Z(W):指定局部坐标系的原点在当前工件坐标系中的坐标位置。绝对与相对坐标代码效果相同。
    注意事项：
    1)设定局部坐标系不改变工件坐标系和机床坐标系。
    2)执行G52时，将暂时取消刀尖半径补偿。
    3)指定G52后，在指定下一个G52指令之前，局部坐标系保持有效。且G52指令指定时不产生移动。
    4)取消局部坐标系，应使局部坐标系零点与工件坐标系零点一致，即指令G52 X0 Z0或G52 U0 W0。
    5)当用G50指令设定工件坐标系时，指定轴的所有工件坐标系下的局部坐标系被取消。如果不是指定所有轴的坐标值，则未指定坐标值的轴的局部坐标系不取消。
    6)复位、机械回零、程序执行结束时是否取消局部坐标系，可由参数设置。
    7)局部坐标系掉电不保存

\tG54～G59
\n    代码格式：G54  工件坐标系 1 
              G55  工件坐标系 2 
              G56  工件坐标系 3 
              G57  工件坐标系 4 
              G58  工件坐标系 5 
              G59  工件坐标系 6 

    代码功能：选择G54～G59设定的工件坐标系。

    代码说明：G54～G59代码是模态代码。在系统中，每个坐标系都对应一个工件坐标系零点偏移值的参数ZOFS1~ ZOFS6，与原工件坐标的关系如下：
[pic]/sys/res/picture/chn/help/help1/program_G54~G59.gif[\pic]
    若参数№12.7设置为1，机械回零后设置绝对坐标系，在绝对坐标系设置完成后，再偏移EXOFS与ZOFSn设置值。每次回零完成后的当前工件坐标的设置如下：
    新工件坐标 = 当前绝对坐标 -（ZOFSn + EXOFS）

    注意事项：
    1)若参数№12.7（APRS）设置为0，机械回零后不设置绝对坐标系
    2)EXOFS与ZOFSn的修改设置只在非运行状态有效。
    3)EXOFS与ZOFSn值被修改后，工件坐标系偏移立即生效。
    4)相对坐标是否包含坐标系的偏移值由参数№05.1（PPD）设定。
    5)在刀尖半径补偿模式中，执行G54～G59时将暂时取消补偿，在下一段移动指令中恢复补偿。
    6)若G54~G59指令与G50共段执行时，G54～G59指令将无效，G50执行有效。
    7)若执行了G50设定坐标系，将修改当前工件坐标系的原点。所有工件坐标系都移动了相同的值。

\tG90
\n    代码格式：G90 X(U)_ Z(W)_ F_；    (圆柱切削)
              G90 X(U)_ Z(W)_ R_ F_； (圆锥切削)

    代码功能：进行柱面或锥面单次切削循环。

    代码说明：G90为模态代码；
        X：切削终点X轴绝对坐标；
        U：切削终点与起点X轴绝对坐标的差值；
        Z：切削终点Z轴绝对坐标；
        W：切削终点与起点Z轴绝对坐标的差值；
        R：切削起点与终点X轴绝对坐标的差值(半径值)
    循环过程：(以圆柱切削为例)
[pic]/sys/res/picture/chn/help/help1/program_G90.gif[\pic]
    ①X轴从起点快速移动到切削起点；
    ②从切削起点直线插补(切削进给)到切削终点；
    ③X轴以切削进给速度退刀，返回到X轴绝对坐标与起点相同处；
    ④Z轴快速移动返回到起点，循环结束。

\tG94
\n    代码格式：G94 X(U)_ Z(W)_ F_；    (端面切削)
              G94 X(U)_ Z(W)_ R_ F_； (锥面切削)

    代码功能：进行端面或锥面单次切削循环。

    代码说明：G94为模态代码；
        X：切削终点X轴绝对坐标；
        U：切削终点与起点X轴绝对坐标的差值；
        Z：切削终点Z轴绝对坐标；
        W：切削终点与起点Z轴绝对坐标的差值；
        R：切削起点与终点Z轴绝对坐标的差值。
    循环过程：(以端面切削为例)
[pic]/sys/res/picture/chn/help/help1/program_G94.gif[\pic]
    ①Z轴从起点快速移动到切削起点；
    ②从切削起点直线插补(切削进给)到切削终点；
    ③Z轴以切削进给速度退刀(与①方向相反)，返回到Z轴绝对坐标与起点相同处；
    ④X轴快速移动返回到起点，循环结束。

\tG71
\n    G71有两种粗车加工循环：类型I和类型II
    代码格式：       
[pic]/sys/res/picture/chn/help/help1/program_G71_0.gif[\pic]

    代码意义：G71代码分为三个部分：
        ⑴：给定切削量、退刀量及速度、转速、刀具；
        ⑵：给定精车轨迹的程序段区间、精车余量；
        ⑶：定义精车轨迹的程序段；

    代码说明：
        U(Δd)：粗车时X轴的切削量；
        R(e)：粗车时X轴的退刀量；
        N(ns)：精车轨迹的第一个程序段的程序段号；
        N(nf)：精车轨迹的最后一个程序段的程序段号
        U(Δu)：X轴的精加工余量；
        W(Δw)：Z轴的精加工余量；
        K：K=1时，系统检查程序的单调性；
        J：J=1时，沿粗车轮廓运行一次，类型II有效；
        F：切削进给速度；
        S：主轴转速；
        T：刀具号、刀具偏置号；

    代码执行过程：(类型I)
[pic]/sys/res/picture/chn/help/help1/program_G71_1.gif[\pic]
    ①从起点A点快速移动到A’点，X轴移动Δu、Z轴移动Δw；
    ②从A’点X轴移动Δd(进刀)，速度与ns程序段一致，进刀方向与A点→B点的方向一致；
    ③Z轴切削进给到粗车轮廓，进给方向与B点→C点Z轴坐标变化一致；
    ④X轴、Z轴按切削进给速度退刀e(45°直线)；
    ⑤Z轴以快速移动速度退回到与A’点Z轴绝对坐标相同的位置；
    ⑥如果X轴再进刀(Δd+e)，终点仍在A’→B’之间，X轴进刀(Δd+e)执行③；否则X轴进刀至B’执行⑦；
    ⑦沿粗车轮廓从B’点切削进给至C’点；
    ⑧从C’点快速移动到A点，G71循环执行结束，程序跳转到nf程序段的下一个程序段执行。

    代码执行过程：(类型II)
[pic]/sys/res/picture/chn/help/help1/program_G71_2.gif[\pic]
    类型Ⅱ不同于类型Ⅰ，
    1）比类型I多1个参数J：当J=1时，系统会沿着粗车轮廓再运行一次
    2）沿X轴的外形轮廓不必单调递增或单调递减，并且最多可以有10个凹槽。
    3）第一刀不必垂直：如果沿Z轴为单调变化的形状就可进行加工。

    注意事项：
    1)ns程序段只能是G00、G01代码；
    2)类型I，ns程序段只能指定X(U)轴，类型II，ns程序段必须指定X(U)和Z(W)两个轴；
    3)精车轨迹(ns～nf 程序段)，Z轴必须是单调变化；类型I中X轴也必须是单调变化，类型II则不需要；
    4)ns～nf程序段中，不能有子程序调用代码(如M98/M99)；
    5)ns～nf程序段，最多允许有100个程序段；
    6)在同一程序中需要多次使用复合循环代码时，ns~ nf不允许有相同程序段号；
    7)ns～nf间程序段号的M、S、T、F功能都无效；

\tG72
\n  G72有两种粗车加工循环：类型I和类型II
    代码格式：       
[pic]/sys/res/picture/chn/help/help1/program_G72_0.gif[\pic]

    代码意义：G72代码分为三个部分：
        ⑴：给定切削量、退刀量及速度、转速、刀具；
        ⑵：给定精车轨迹的程序段区间、精车余量；
        ⑶：定义精车轨迹的程序段；

    代码说明：
        W(Δd)：粗车时Z轴的切削量；
        R(e)：粗车时Z轴的退刀量；
        N(ns)：精车轨迹的第一个程序段的程序段号；
        N(nf)：精车轨迹的最后一个程序段的程序段号
        U(Δu)：粗车时X轴留出的精加工余量；
        W(Δw)：粗车时Z轴留出的精加工余量； 
        K：K=1时，系统检查程序的单调性；
        J：J=1时，沿粗车轮廓运行一次，类型II有效；
        F：切削进给速度；
        S：主轴转速；
        T：刀具号、刀具偏置号；

    代码轨迹：(类型I)
[pic]/sys/res/picture/chn/help/help1/program_G72_1.gif[\pic]
    ①从起点A点快速移动到A’点，X轴移动Δu、Z轴移动Δw；
    ②从A’点Z轴移动Δd(进刀)，速度与ns程序段一致，进刀方向与A点→B点的方向一致；
    ③X轴切削进给到粗车轮廓，进给方向与B点→C点X轴坐标变化一致；
    ④X轴、Z轴按切削进给速度退刀e(45°直线)；
    ⑤X轴以快速移动速度退回到与A’点Z轴绝对坐标相同的位置；
    ⑥如果Z轴再进刀(Δd+e)后，仍在A’→B’之间，Z轴进刀(Δd+e)执行③；否则进刀至B’执行⑦；
    ⑦沿粗车轮廓从B’点切削进给至C’点；
    ⑧从C’点快速移动到A点，G72循环执行结束，程序跳转到nf程序段的下一个程序段执行。
    类型Ⅱ不同于类型Ⅰ：
    1）比类型I多1个参数J：当J=1时，系统会沿着粗车轮廓再运行一次
    2）沿Z轴的外形轮廓不必单调递增或单调递减，并且最多可以有10个凹槽。
    3）第一刀不必垂直：如果沿Z轴为单调变化的形状就可进行加工。

    注意事项：
    1)ns程序段只能是G00、G01代码；
    2)类型I，ns程序段只能指定Z(U)轴，类型II，ns程序段必须指定X(U)和Z(W)两个轴；
    3)精车轨迹(ns～nf 程序段)，Z轴必须是单调变化；类型I中X轴也必须是单调变化，类型II则不需要；
    4)ns～nf程序段中，不能有子程序调用代码(如M98/M99)；
    5)ns～nf程序段，最多允许有100个程序段；
    6)在同一程序中需要多次使用复合循环代码时，ns～nf不允许有相同程序段号；
    7)ns～nf间程序段号的M、S、T、F功能都无效；

\tG73
\n    代码格式：       
[pic]/sys/res/picture/chn/help/help1/program_G73_0.gif[\pic]

    代码意义：G73代码分为三个部分：
        ⑴：给定切削量、退刀量及速度、转速、刀具；
        ⑵：给定精车轨迹的程序段区间、精车余量；
        ⑶：定义精车轨迹的程序段。
    代码说明：
        U(Δi)：X轴粗车退刀量；
        W(Δk)：Z轴粗车退刀量；
        R(d)：切削的次数；
        N(ns)：精车轨迹的第一个程序段的程序段号；
        N(nf)：精车轨迹的最后一个程序段的程序段号
        U(Δu)：X轴的精加工余量；
        W(Δw)：Z轴的精加工余量；
        F：切削进给速度；
        S：主轴转速；
        T：刀具号、刀具偏置号；
    代码轨迹：
[pic]/sys/res/picture/chn/help/help1/program_G73_1.gif[\pic]
        1.A→A1：快速移动；
        2.第一次粗车，A1→B1→C1：
        3.C1→A2：快速移动；
        4.第二次粗车，A2→B2→C2：
        5.C2→A3：快速移动；
        …………
        …………
        最后一次粗车，Ad→Bd→Cd ：
        Cd→A：快速移动到起点；

    注意事项：
    1)ns～nf程序段中，不能有子程序调用代码；
    2)ns～nf程序段，最多允许有100个程序段；
    3)在同一程序中需要多次使用复合循环代码时，ns～nf不允许有相同程序段号；
    4)ns～nf间程序段号的M、S、T、F功能都无效；

\tG70
\n    代码格式：G70 P(ns)_ Q(nf)_；

    代码功能：刀具从起点位置沿着ns～nf程序段给出的工件加工轨迹进行加工。

    代码意义：
        ns：精车轨迹的第一个程序段的程序段号；
        nf：精车轨迹的最后一个程序段的程序段号；
        G70代码轨迹由ns～nf之间程序段的轨迹决定；

    注意事项：
    1) 执行G70精加工循环时，ns～nf程序段中的F、S、T代码有效；
    2) 执行单程式段的操作，在运行完当前轨迹的终点后程序暂停；
    3) 在同一程序中需要多次使用复合循环代码时，ns～nf不允许有相同程序段号；
    4) ns～nf程序段，最多允许有100个程序段；

\tG74
\n    代码格式：
      G74 R(e)_；
      G74 X(U)_ Z(W)_ P(Δi)_ Q(Δk)_ R(Δd)_ F_；

    代码意义：径向(X轴)进刀循环复合轴向断续切削循环,此代码用于在工件端面加工环形槽或中心深孔。

    代码说明：
        R(e)：每次轴向(Z轴)进刀后的轴向退刀量。
        X：切削终点Bf的X轴绝对坐标值。
        U：切削终点Bf与起点A 的X轴绝对坐标的差值。
        Z：切削终点Bf的Z轴的绝对坐标值。
        W：切削终点Bf与起点A的Z轴绝对坐标的差值。
        P(Δi)：X轴切削量(单位：最小输入增量)。
        Q(Δk)：Z轴进刀量(单位：最小输入增量)。
        R(Δd)：切削至轴向终点后，X轴的退刀量。

    代码轨迹：
[pic]/sys/res/picture/chn/help/help1/program_G74.gif[\pic]
    ①从轴向切削循环起点An轴向(Z轴)切削进给△k；
    ②轴向(Z轴)快速移动退刀e；
    ③如果Z轴进给(Δk+e)，终点在An与Bn之间，Z轴进给(Δk+e)执行②；否则进给至Bn点执行④；
    ④径向(X轴)快速移动退刀△d/2至Cn点；
    ⑤轴向(Z轴)快速移动退刀至Dn点，第n次轴向切削循环结束。循环未结束执行⑥；循环结束执行⑦；
    ⑥径向(X轴)快速移动进刀(△d/2+△i/2)，如经过Af点则进刀至Af点，然后执行①，开始下一次循环；
    ⑦X轴快速移动返回到起点A，G74代码执行结束。

\tG75
\n    代码格式：
      G75 R(e)； 
      G75 X(U)_ Z(W)_ P(Δi)_ Q(Δk)_ R(Δd)_ F_；

    代码意义：轴向(Z轴)进刀循环复合径向断续切削循环：此代码用于加工径向环形槽或圆柱面。

    代码说明：
        R(e)：每次径向(X轴)进刀后的径向退刀量。
        X：切削终点Bf的X轴绝对坐标值。
        U：切削终点Bf与起点A 的X轴绝对坐标的差值。
        Z：切削终点Bf的Z轴的绝对坐标值。
        W：切削终点Bf与起点A的Z轴绝对坐标的差值。
        P(Δi)：X轴进刀量（单位：最小输入增量）。
        Q(Δk)：Z轴进刀量（单位：最小输入增量）。
        R(Δd)：切削至径向终点后，Z轴的退刀量。

    代码轨迹：
[pic]/sys/res/picture/chn/help/help1/program_G75.gif[\pic]
    ①从径向切削循环起点An径向(X轴)切削进给△i；
    ②径向(X轴)快速移动退刀e；
    ③如果X轴进给(Δi+e)，终点在An与Bn之间，X轴进给(Δi+e)执行②；否则进给至Bn点执行④；
    ④轴向(Z轴)快速移动退刀△d至Cn点；
    ⑤径向(X轴)快速移动退刀至Dn点，第n次径向切削循环结束。循环未结束执行⑥；循环结束执行⑦；
    ⑥轴向(Z轴)快速移动进刀(△d+△k)，如经过Af点则进刀至Af点，然后执行①，开始下一次循环；
    ⑦Z轴快速移动返回到起点A，G75代码执行结束。

\tG83/87
\n    代码格式：
      G83 X(U)_ C(H)_ Z(W)_ P_ Q_ R_ F_ K_ M_ J_；
      G87 Z(W)_ C(H)_ X(U)_ P_ Q_ R_ F_ K_ M_ J_；

    代码意义：钻孔循环分轴向钻孔G83和径向钻孔G87，分别用于轴向（Z轴）钻孔和径向（X轴）钻孔。

    代码说明：G83、G87为模态G代码
        (X，C)：钻孔位置；----G83
        Z     ：孔底位置；----G83
        (Z，C)：钻孔位置；----G87
        X     ：孔底位置；----G87
        P：孔底暂停时间(单位：ms)；
        Q：每次进刀量(单位：最小输入增量，半径值)
        R：每次进刀后的退刀量；
        F：进给速度；
        K：钻孔重复次数；
        M：用于夹紧分度主轴的M代码；
        J：0：高速深孔钻孔循环；1：深孔钻孔循环；

    代码轨迹：
    I：高速深孔钻孔循环（J＝0）：
[pic]/sys/res/picture/chn/help/help1/program_G8387_0.gif[\pic]
    ①快速定位到钻孔起始位置，如有夹紧主轴的M代码，则定位到位后夹紧主轴； 
    ②切削进给Q距离；如到达孔底位置暂停P指定时间执行⑥；
    ③快速退刀R距离；如退刀过程中到达钻孔起始位置，则退刀至钻孔起始位置；
    ④切削进给（Q+R）距离；如上次退刀至钻孔起始位置，则切削进给（Q+上次退刀量）距离；
    ⑤循环③④直至加工到孔底，暂停P指定时间；
    ⑥快速返回钻孔起始位置，如执行了主轴夹紧的M代码，则定位到位后松开主轴；
    ⑦如循环未结束返回①开始下一次加工循环；
    II：深孔钻孔循环（J＝1）：
[pic]/sys/res/picture/chn/help/help1/program_G8387_1.gif[\pic]
    ①快速定位到钻孔起始位置，如有夹紧主轴的M代码，则定位到位后夹紧主轴；  
    ②切削进给Q距离；如到达孔底位置暂停P指定时间执行⑦；
    ③快速退刀至钻孔起始位置；
    ④快速定位至距离上次进给深度R的位置（图中C点位置）；
    ⑤切削进给（Q+R）距离；
    ⑥循环③⑤直至加工到孔底；
    ⑦快速返回钻孔起始位置，如执行了主轴夹紧的M代码，则定位到位后松开主轴；
    ⑧如循环未结束返回①开始下一次加工循环；

    注意事项：
    1)G83、G87指令不允许使用C刀补，进入钻孔循环时会自动撤消刀具半径补偿，钻孔完成后自动恢复。
    2)执行G83、G87指令时必须选择G18平面。
    3)G83、G87指令不能在G71～G73指令、极坐标模式中执行。
    4)G83、G87指令的钻孔必须设为直线轴。
    5)每次进刀量Q为0时（或不输入时），钻孔加工直接进给到孔底。
    6)高速深孔钻孔呕分型说读R为0时，钻孔加工直接进给到孔底。

\tG32
\n    代码格式：G32 X(U)_ Z(W)_ F(I)_ J_ K_ Q_；

    代码功能：G32代码可以加工等螺距的直螺纹、锥螺纹和端面螺纹和连续的多段螺纹加工。

    代码说明：模态G代码；
        X(U)、Z(W)：螺纹终点，移动量较大的轴为长轴
        F：螺纹导程；
        I：每英寸螺纹的牙数；
        J：螺纹退尾的退尾量,半径指定；
        K：螺纹退尾时在长轴方向的长度，半径指定；
        Q：螺纹起始角(单位：0.001度)；

    注意事项：
    1)J、K是模态代码，连续螺纹切削时可省略J、K，按前面的J、K值进行退尾；
    2)连续两段程序均为G32时，螺纹自动衔接，可实现连续螺纹加工；
    3)螺纹加工中执行进给保持操作，直到螺纹切削完（包括连续螺纹）才会暂停；
    4)单段运行连续螺纹加工，直到所有连续螺纹切削完才会单段停；
    5)对于连续螺纹切削，仅第一段的Q值有效。

\tG32.1
\n    代码格式：
        G32.1 X(U)_ Z(W)_ C(H)_ F(I)_ J_ K_ S_；

    代码功能：在刚性螺纹是由进给轴和主轴之间的插补来执行螺纹插补，从而得到精度较高的螺纹。

    代码说明：G32.1为01组G指令
        C：螺纹插补的起始角度；
        (X,Z)：螺纹插补的终点坐标；
        F(I)：螺纹的导程，>0时右旋，<0时左旋；
        J：螺纹退尾的退尾量，半径指定；
        K：螺纹退尾时在长轴方向的长度，半径指定；
        S：主轴的转速；

    注意事项：
    1)主轴必须为伺服主轴并且工作在位置控制方式；
    2)在有多主轴控制时，G32.1只允许在第1主轴使用；
    3)需要重复加工时，须使X、Z、C轴的起始位置每次都相同；
    4)G32.1指令执行时，暂停等信号暂时不起作用，主轴倍率固定为100%。

\tG32.2/32.3
\n    代码格式：
        G32.2  X(U)_ Z(W)_ R_ (I_ K_ )F_ Q_；
        G32.3  X(U)_ Z(W)_ R_ (I_ K_ )F_ Q_；

    代码功能：圆弧螺纹的运动轨迹是从起点到终点的一段圆弧,并实现等螺距的螺旋切槽。

    代码说明：G32.2/G32.3为模态G代码；
        X(U)、Z(W)：螺纹插补的终点坐标。
        R：圆弧半径；
        I：圆心与起点在X方向的差值，半径值；
        K：圆心与起点在Z方向的差值；
        F：螺纹的导程；
        Q：螺纹起始角(单位：0.001度)。

    注意事项：
    1）当R与I、K同时指定时，R值有效；
    2）螺纹的导程是指主轴转一圈长轴的位移量(X轴位移量则按半径值)；
    3）参数№202 bit7为0时，圆弧螺纹跟随主轴编码器的反馈信号；
    4）参数№202 bit7为1时，圆弧螺纹为刚性螺纹，主轴必须为伺服主轴；
    5）圆弧螺纹指定的圆弧段必须在一定的区间内（X轴为长轴的区间内或Z轴为长轴的区间内）。
[pic]/sys/res/picture/chn/help/help1/program_G32.2G32.3.gif[\pic]

\tG34
\n    代码格式：G34 X(U)_ Z(W)_ F(I)_ J_ K_ R_；

    代码功能：运动过程中主轴每转一圈长轴移动一个导程，主轴每转一圈移动的螺距是不断增加指定的值或减少指定的值，执行G34代码可以加工公/英制变螺距的直螺纹、锥螺纹和端面螺纹。

    代码说明：G34为模态G代码；
        X(U)、Z(W)、J、K的意义与G32一致；
        F：指定导程；
        I：指定每英寸螺纹的牙数；
        R：主轴每转螺距的增量值或减量值；

    注意事项：
    1）因R的增加/减小使螺距超过允许值或螺距出现负值时产生报警。
    2)螺纹加工中执行进给保持操作，直到螺纹切削完（包括连续螺纹）才会暂停。

\tG33
\n
    代码格式：G33 Z(W)_ F(I)_ L_；

    代码功能：运动轨迹是从起点到终点，再从终点回到起点。在工件内孔形成一条螺旋切槽，完成内孔的螺纹加工。

    代码说明：G33为模态G代码；
        Z(W)：攻丝孔底位置；
        F：螺纹导程；
        I：每英寸螺纹的牙数；
        L：多头螺纹的头数；

    循环过程：
    1)Z轴进刀攻牙(G33代码前必须指定主轴开)；
    2)到达编程指定的Z轴坐标终点后，M05信号输出；
    3)检测主轴完全停止后；
    4)顺时针转信号输出(与原来主轴旋转的方向相反)；
    5)Z轴退刀到起点；
    6)M05信号输出，主轴停转；
    7)如为多头螺纹，重复步骤1)～步骤6)步骤。

    注意事项：
    1)攻丝前应根据丝锥的旋向来确定主轴旋转方向。
    2)此代码是柔性攻丝，实际加工时螺纹的底孔位置应比实际的需要位置稍深一些。
    3)攻丝时Z轴的移动速度由主轴转速与螺距决定，与切削进给速度倍率无关。
    4)在单程式段运行或执行进给保持操作，攻丝循环不立刻停止，直到攻丝完成后才停止运动。 

\tG84/88
\n
    代码格式：
        G84 X(U)_ C(H)_ Z(W)_ P_ F(I)_ K_ M_；
        G88 Z(W)_ C(H)_ X(U)_ P_ F(I)_ K_ M_；

    代码功能：G84：端面刚性攻丝；G88：侧面刚性攻丝

    代码说明：模态G代码
        (X，C)：攻丝孔位置；----G84
        Z  ： 攻丝孔底位置；----G84
        (Z，C)：攻丝孔位置；----G88
        X  ： 攻丝孔底位置；----G88
        P ：攻丝到孔底暂停的时间（ms）；
        F(I)：螺纹的导程，>0时右旋，<0时左旋；
        K ：攻丝重复次数；
        M ：用于夹紧分度主轴的M代码。

    刚性攻丝指定：在G84/G88指令之前指定M29 S_：
        M29  S_；
        G84(G88) X_C_(Z_C_) Z_(X_) P_ F_ K_ M_；
    在M29和G84/G88指令之间，不可以指定轴移动指令；期间不可重复指定M29指令；
    代码轨迹：
[pic]/sys/res/picture/chn/help/help1/program_G8488.gif[\pic]
    1)动作1：定位到孔位置（刚性攻丝的起点）；
    2)在开始动作2之前，如果有用于夹紧主轴的M代码，则输出Mα；
    3)动作2：刚性攻丝开始；
    4)动作3：刚性攻丝在孔底暂停时间P；
    5)动作4：刚性攻丝回退孔位置（攻丝的起点）；
    6)如果刚性攻丝程序段指定了夹紧主轴的M代码，则此处输出Mβ；

    刚性攻丝的撤消：刚性攻丝的撤消方式有如下几种情况：
    1）用G80取消刚性攻丝方式；
    2）用G代码指令其他循环；
    3）01组的其它的G代码；
    4）CNC复位。

    注意事项：
    1)在刚性攻丝中改变了攻丝方向中（即G84、G88之间切换），则需要重新指定攻丝孔底的位置；
    2)刚性攻丝期间，空运行功能无效；
    3)在刚性攻丝期间进行复位操作时，刚性攻丝状态解除，主轴回到进入刚性攻丝之前的状态；
    4)在刚性攻丝期间，执行攻丝段与攻丝回退期间，进给保持/单段运行功能暂时无效；

\tG92
\n
    代码格式：G92 X(U)_ Z(W)_ R_ F(I)_ J_ K_ L_；

    代码功能：单次螺纹切削循环。

    代码说明：G92为模态G代码；
        X：切削终点X轴绝对坐标；
        U：切削终点与起点X轴绝对坐标的差值；
        Z：切削终点Z轴绝对坐标；
        W：切削终点与起点Z轴绝对坐标的差值；
        R：切削起点与终点X轴绝对坐标的差值(半径值)
        F：螺纹导程；
        I：螺纹每英寸牙数；
        J：螺纹退尾时在短轴方向的移动量(半径值)；
        K：螺纹退尾时在长轴方向的长度(半径值)；
        L：多头螺纹的头数。

    代码轨迹：(以直螺纹为例)
[pic]/sys/res/picture/chn/help/help1/program_G92.gif[\pic]
    ①X轴从起点快速移动到切削起点；
    ②从切削起点螺纹插补到切削终点；
    ③X轴以快速移动速度退刀(与①方向相反)，返回到X轴绝对坐标与起点相同处；
    ④Z轴快速移动返回到起点，循环结束。

    注意事项：
    1)省略J、K时，按№19号参数设定值退尾；
    2)螺纹切削过程中执行进给保持操作，系统仍进行螺纹切削，直到螺纹切削完毕程序运行暂停；
    3)螺纹切削过程中执行单程式段操作后，在螺纹切削循环动作完成后运行停止；

\tG92.1
\n
    代码格式：G92.1 X(U)_ Z(W)_ R_ F(I)_ L_ S_；

    代码功能：刚性螺纹切削循环，使用插补方式进行螺纹切削。

    代码说明：G92.1为模态G代码；
        X：切削终点X轴绝对坐标；
        U：切削终点与起点X轴绝对坐标的差值；
        Z：切削终点Z轴绝对坐标；
        W：切削终点与起点Z轴绝对坐标的差值；
        R：切削起点与终点X轴绝对坐标的差值(半径值)
        F：螺纹的导程，>0时右旋，<0时左旋；
        L：多头螺纹的头数；
        S：螺纹切削的转速；

    代码轨迹：(以直螺纹为例)
[pic]/sys/res/picture/chn/help/help1/program_G92.1.gif[\pic]
    ①X轴从循环起点A快速移动到切削起点B，如果是多头螺纹，主轴定位到起始角度；
    ②从切削起点B，进给轴与主轴螺纹插补到终点C，在终点C处进给轴与主轴都停止运动；
    ③X轴以快速移动速度从C点退回至D点；
    ④Z轴以快速移动速度从D点退回到A，同时主轴定位到循环加工初始的角度，循环结束。

    注意事项：
    1)主轴必须为伺服主轴并且工作在位置控制方式；
    2)在有多主轴控制时，G92.1只允许在第1主轴使用；
    3)螺纹切削过程中执行进给保持操作，系统仍进行螺纹切削，直到螺纹切削完毕程序运行暂停；
    4)螺纹切削过程中执行单段操作后，在螺纹切削循环动作完成时运行停止；

\t螺纹修复
\n
    代码格式：
        G92   X(U)_ Z(W)_ R_ F(I)_ L_ P_ S_；
        G92.1 X(U)_ Z(W)_ R_ F(I)_ L_ P_ S_；

    代码功能：G92 P1、G92.1 P1可以对已损坏的螺纹进行修复操作。G92 P1跟随式螺纹修复；G92.1插补式螺纹修复

    代码说明：模态G代码；
        X：切削终点X轴绝对坐标；
        U：切削终点与起点X轴绝对坐标的差值；
        Z：切削终点Z轴绝对坐标；
        W：切削终点与起点Z轴绝对坐标的差值；
        R：切削起点与终点X轴绝对坐标的差值(半径值)
        F：螺纹的导程，>0时右旋，<0时左旋；
        L：多头螺纹的头数；
        P：0：不执行修复功能，1：执行修复功能；
        S：螺纹切削的转速；

    操作方法
    1)螺纹修复功能启用：将状态参数№174的Bit4位设定为“1”。
    2)螺纹修复方式选择：参数№174的Bit5位设定修复螺纹的模式：跟随式／插补式。
    3)螺纹修复位置记录：在手动、手轮或单步方式下，将主轴切换为位置控制方式（使用跟随式螺纹修复时，不用切换主轴控制方式），移动刀具使刀具的刀尖与螺纹牙槽尽量吻合。进入到绝对坐标界面，按[螺纹修复位置记录]软功能键，系记录螺纹修复位置。
    4)螺纹修复执行：使用G92.1、G92代码进行螺纹修复操作。

    注意事项
    1)当螺纹修复功能无效时，G92、G92.1代码中指定了P1参数，系统自动忽略；
    2)当螺纹修复功能有效时，G92、G92.1代码中未指定了P1或指定其他非1的值，系统不执行修复功能；
    3)进行螺纹修复时，如未记录螺纹修复位置，系统产生报警；
    4)使用多段G92、G92.1代码进行螺纹修复时，P1参数只需在第1段G92、G92.1代码中进行指定；
    5)记录的螺纹修复位置的长轴坐标不在螺纹修复程序段的的起点与终点之间时，产生报警。
    6)使用插补式螺纹修复复时，主轴必须为伺服主轴并且工作在位置控制方式；。
    7)进行螺纹修复时，必须将数据参数NO191的数值校准（该值为各轴的速度为1m/min的位置超差值）；

\tG76
\n    代码格式：
       G76 P(m)(r)(a)  Q(△dmin)_ R(d)_ J_ K_；
       G76 X(U)_ Z(W)_ R(i)_ P(k)_ Q(△d)_ F(I)_；

    代码功能：通过多次螺纹切削进行螺纹加工，可实现单侧刀刃螺纹切削，吃刀量逐渐减少，有利于保护刀具、提高螺纹精度。可用于加工直螺纹和锥螺纹。

    代码说明：
        X(U)：螺纹终点的X轴坐标值；
        Z(W)：螺纹终点的Z轴坐标值；
        P(m)：螺纹精车次数00～99 (单位：次) ；
        P(r)：螺纹退尾长度00～99(单位：0.1螺距)；
        P(a)：螺纹的夹角00～99，单位：度(°)；
        Q(△dmin)：粗车最小切削量(单位:输入增量)；
        R(d)：螺纹精车的切削量；
        R(i)：螺纹锥度，起点与终点X轴坐标差值；
        P(k)：螺纹总切削深度(单位：最小输入增量)；
        Q(△d)：第一次螺纹切削深度(单位:输入增量)
        F：螺纹导程；
        I：螺纹每英寸的螺纹牙数；
        J：螺纹退尾时在短轴方向的退尾量，半径指定
        K：螺纹退尾时在长轴方向的长度，半径指定；

    代码轨迹：
[pic]/sys/res/picture/chn/help/help1/program_G76.gif[\pic]
    ①从起点快速移动到B1，螺纹切深为△d。
    ②沿平行于C→D的方向螺纹切削到与D→E相交处(r≠0时有退尾过程)；
    ③X轴快速移动到E点；
    ④Z轴快速移动到A点，单次粗车循环完成；
    ⑤再次快速移动进刀到Bn(n为粗车次数)执行转②执行；直到进刀到Bf点，执行⑥；
    ⑥沿平行于C→D的方向螺纹切削到与D→E相交处(r≠0时有退尾过程)；
    ⑦X轴快速移动到E点；
    ⑧Z轴快速移动到A点，螺纹粗车循环完成，开始螺纹精车；
    ⑨快速移动到Be点(螺纹切深为k、切削量为d)后，进行螺纹精车，最后返回A点；
    ⑩如果精车循环次数小于m，转⑨进行下一次精车循环，螺纹切深仍为k，切削量为0；

    注意事项：
    1)螺纹切削过程中执行进给保持操作，系统仍进行螺纹切削，直到螺纹切削完毕程序运行暂停；
    2)G76没有编写J、K时，按照P(r)或19号参数退尾；若编写了J、K，退尾方式和G32、G92相同。
\tG78
\n    代码格式：
  G78 P(m)(r)(a) Q(△dmin)_ R(d)_ J_ K_ D_ L_ E_；
  G78 X(U)_ Z(W)_ R(i)_ P(k)_ Q(△d)_ F(I)_；

    代码功能：在G76指令的基础上增加旋进功能，进刀方式、切入方式选择。

    代码说明：
        X(U)：螺纹终点的X轴坐标值；
        Z(W)：螺纹终点的Z轴坐标值；
        P(m)：0:等距离进刀；1:递减式进刀(同G76)。
        P(r)：0～3，切入方式选择；
        P(a)：相邻两牙螺纹的夹角，单位：度(°)
        Q(△dmin)：粗车最小切削量(单位:输入增量)
        R(d)：螺纹精车的切削量；
        J   ：螺纹退尾短轴方向退尾量，半径值；
        K   ：螺纹退尾时在长轴方向的长度，半径值；
        D   ：精车次数；
        L   ：螺纹头数；
        E   ：X向旋进距离值（半径值)；
        R(i)：螺纹锥度，起点与终点X轴坐标差值；
        P(k)：螺纹牙高 (单位：最小输入增量)；
        Q(△d)：第一次螺纹切削深度(单位:输入增量)
        F   ：螺纹导程；
        I   ：螺纹每英寸的螺纹牙数；

    代码轨迹：
        中间切入方式：P(r)=0
[pic]/sys/res/picture/chn/help/help1/program_G78_0.gif[\pic]
        左边切入方式：P(r)=1
[pic]/sys/res/picture/chn/help/help1/program_G78_1.gif[\pic]
        右边切入方式：P(r)=2
[pic]/sys/res/picture/chn/help/help1/program_G78_2.gif[\pic]
        左右两边轮流切入：P(r)=3
[pic]/sys/res/picture/chn/help/help1/program_G78_3.gif[\pic]
\tG96/97
\n    代码格式：G96 S__；  (恒线速控制)
              G97 S__；  (恒转速控制)

    代码功能：恒线速控制有效G96、S指令的数据为切削线速度（m/min）；恒转速控制有效G97，S指令的数据为主轴转速（r/min）

    代码说明：
    车床车削工件时，工件通常以主轴轴线为中心线进行旋转，刀具切削工件的切削点可以看成围绕主轴轴线作圆周运动，圆周切线方向的瞬时速率称为切削线速度（通常简称线速度）。
    恒线速控制时，主轴转速随着编程轨迹（忽略刀具长度补偿）的X轴绝对坐标值的绝对值的变化：
        线速度=主轴转速×|X|×π÷1000（m/min）
        主轴转速：r/min
        |X|：X轴绝对坐标值的绝对值（直径值），mm

    注意事项：使用指令：G50 S__；设置恒线速控制时的主轴最高转速限制值，防止主轴转速过高。

\tG98/99
\n    代码格式：G98 F__；（每分进给）
              G99 F__；（每转进给）

    代码功能：每分进给G98，F指令以mm/min为单位给定切削进给速度；每转进给G99，F指令以毫米/转为单位给定切削进给速度。

    代码说明：
    使用每转进给G99 F__时，把F代码值（毫米/转）与当前主轴转速（r/min）的乘积作为代码进给速度控制实际的切削进给速度，主轴转速变化时，实际的切削进给速度随着改变。每转进给量与每分钟进给量的换算公式：
          Fm = Fr×S
    其中：Fm：每分钟的进给量（mm/min）；
          Fr：每转进给量（mm/r）；
          S ：主轴转速（r/min）。

\r宏代码
\n
    GSK980TDi提供了类似于高级语言的宏代码，用户宏代码可以实现变量赋值、算术运算、逻辑判断及条件转移，利于编制特殊零件的加工程序，减少手工编程时进行繁琐的数值计算，精简了用户程序。

\t宏变量
\n
    宏变量格式：#i(i可为常数或表达式)；
        示例：#105，#109，#[#125 + #100 * #111]。

    变量的类型：
        变量根据变量号可以分成四种类型。
[pic]/sys/res/picture/chn/help/help1/program_MacroVar.gif[\pic]

\t运算、转移
\n
    代码格式：G65 Hm  P#i  Q#j  R#k；

    代码说明：m：表示运算命令或转移命令功能。
              #i：存入运算结果的变量名。
              #j：进行运算的变量名1，可以是常数。
              #k：进行运算的变量名2，可以是常数。

    运算、转移命令
[pic]/sys/res/picture/chn/help/help1/program_MacroCode_0.gif[\pic]
[pic]/sys/res/picture/chn/help/help1/program_MacroCode_1.gif[\pic]
\t宏程序调用
\n    用户宏程序调用(G65,G66)和子程序调用(M98)的区别如下，
    1)用G65,G66,可以指定自变量数据并传送到宏程序，而M98没有该功能；
    2)用G65,G66可以改变局部变量的级别，用M98不能；
    3)G65、G66该代码之前只允许出现代码字N且紧跟其后要出现P或H代码字。

    1.非模态调用G65	
    代码格式：G65 P_ L_ <自变量>_；

    代码功能：以地址P指定的宏程序被调用，自变量(数据)传递到用户宏程序体中，G65调用可以有四级嵌套

    代码说明：
        P：被调用的宏程序号；
        L：被调用的次数；
        <自变量>：被传送到宏程序的局部变量的数据；

    <自变量>的指定有两种方式：
    方式I：使用除G,L,O,N,P以外的字母，每个字母对应一个局部变量：
[pic]/sys/res/picture/chn/help/help1/program_MacroVar_auto0.gif[\pic]
    方式II：使用A、B、C 和 Ii、Ji、Ki(i为字母重复出现次数，编程中不输入)，对应局部变量。
[pic]/sys/res/picture/chn/help/help1/program_MacroVar_auto1.gif[\pic]

    2.模态调用G66
    代码格式：G66 P_ L_ <自变量>_；

    代码功能：声明宏程序模态调用。

    代码说明：
        P：被调用的宏程序号；
        L：被调用的次数；
        <自变量>：被传送到宏程序的局部变量的数据；

    注意事项：
    1)执行G66程序段的作用是声明宏程序模态调用，本段并不调用宏程序；
    2)在G66模态调用状态下，执行完有G00、G01、G02、G03、G05代码的程序段后，将再次调用宏程序；
    3)每次调用都会按自变量更新局部变量的值；
    4)G65调用会自动取消G66模态调用。

    3.取消模态调用G67
        代码格式：G67；

        代码功能：取消G66模态宏程序调用；
\t表达式宏
\n
[pic]/sys/res/picture/chn/help/help1/program_StateMacroCode0.gif[\pic]
[pic]/sys/res/picture/chn/help/help1/program_StateMacroCode1.gif[\pic]
\t转移
\n
    代码格式：GOTOn；  (n：程序段号)

    代码功能：转移到程序段号为n的程序段。n可用表达式指定。

\t条件
\n    代码格式：
        格式一：IF[条件表达式]GOTOn；
        格式二：IF[条件表达式]THEN<宏程序语句>；

    代码功能：
        格式一：条件为真时，转移到段号为n的程序段
        格式二：条件为真时，执行THEN后面的语句。

    条件运算符：GSK980TDi可使用下表中列出的条件运算符
[pic]/sys/res/picture/chn/help/help1/program_Condition_operator.gif[\pic]

\t循环
\n
    在 WHILE 后指定一个条件表达式，当指定条件成立时，执行从 DO 到 END 之间的程序段；否则，跳转到END后的程序段。
[pic]/sys/res/picture/chn/help/help1/program_Macro_WHILE.gif[\pic]
    DO 后的标号和 END 后的标号要一致，标号值可以是1、2或3。若用1、2、3以外的值将会报警。标号值用于区分循环嵌套使用的层数，非嵌套使用时可重复使用。

\tG代码调用
\n
    代码格式：G<代码值> L_ <自变量>；

    代码功能：调用9010～9019号程序，每个程序有相应的调用代码值。

    代码说明：
        <代码值>：由数据参数№86～№95号设定；
        L ：被调用的次数；
        <自变量>：传送到宏程序的局部变量的数据；

    注意事项：
    1)数据参数№86～№95设定值与标准G代码相同时，本功能无效；
    2)<自变量>的指定方式与G65相同。

\t参数读写
\n    代码格式：
        G10  L52；          (进入参数读、写方式)
        N(K/D/DT/DC)_ P_ R(W)_；    (参数读、写)
        …
        G11；               (取消参数读、写方式)

    代码说明：
        N_ ：参数号；
        K_ ：PLC的K参数号；
        D_ ：PLC的D参数号；
        DT_：PLC的DT参数号；
        DC_：PLC的DC参数号；
        R_ ：R为参数的读出地址，只能为宏变量号；
        W_ ：为参数的写入值，可以是常量或宏变量；
        P_ ：轴号或通道号；

    注意事项：
    1)当读、写的参数为状态参数或K参数时，其读、写的值为二进制，其它情况为十进制；
    2)P值用于读取轴型、主轴型、通道型参数时使用，读取其它类型参数时指定无效；